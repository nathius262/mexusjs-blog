<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="description"
        content="A modular blog platform built on MexusJS (NexusJS), Express, Sequelize, Handlebars, Cloudinary, and Multer — designed for scalability and clean modular architecture.">
    <meta name="keywords"
        content="mexusjs, nexusjs, express, sequelize, handlebars, blog, modular framework">
    <meta name="author" content="mexusjs-blog">
    <meta property="og:title" content="MexusJS Blog | {{pageTitle}}">
    <meta property="og:description"
        content="A modular blog platform built on MexusJS (NexusJS), Express, Sequelize, Handlebars, Cloudinary, and Multer — designed for scalability and clean modular architecture.">
    <meta property="og:image" content="{{pageLogo}}">
    <meta property="og:url" content="https://github.com/your-username/mexusjs-blog">

    <!--twitter social share-->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="MexusJS Blog | {{pageTitle}}" id="twitterTitle">
    <meta name="twitter:description"
        content="A modular blog platform built on MexusJS (NexusJS), Express, Sequelize, Handlebars, Cloudinary, and Multer — designed for scalability and clean modular architecture."
        id="twitterDescription">
    <meta name="twitter:image" content="{{pageLogo}}" id="twitterImage">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>MexusJS Blog | {{pageTitle}}</title>

    <link rel="icon" href="/assets/img/logo.jpg">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,600&amp;display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css"
        integrity="sha512-siarrzI1u3pCqFG2LEzi87McrBmq6Tp7juVsdmGY1Dr8Saw+ZBAzDzrGwX3vgxX1NkioYNCFOVC0GpDPss10zQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/solid.min.css"
        integrity="sha512-Hp+WwK4QdKZk9/W0ViDvLunYjFrGJmNDt6sCflZNkjgvNq9mY+0tMbd6tWMiAlcf1OQyqL4gn2rYp7UsfssZPA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css"
        integrity="sha512-W/zrbCncQnky/EzL+/AYwTtosvrM+YG/V6piQLSe2HuKS6cmbw89kjYkp3tWFn1dkWV7L1ruvJyKbLz73Vlgfg=="
        crossorigin="anonymous" referrerpolicy="no-referrer">

    <link href="/assets/css/style.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <!--============ROOT SECTION==============-->
    <section id="root" class="position-relative overflow-x-hidden">
        <!--=========HEADER BEGIN===========-->
        {{> header}}
        <!--=========HEADER END===========-->

        <!--=========MAIN BEGIN===========-->
        {{{body}}}
        <!--=========MAIN END===========-->

        <!--=========FOOTER BEGIN===========-->
        {{> notification/success}}
        {{> footer}}
        <!--=========FOOTER END===========-->

        {{> modals/message}}
    </section>
    <!--============ROOT SECTION END==============-->

    <script type="module" src="/assets/js/app.js"></script>

    <script>
        //global script
        let title, message, redirectTo, classType, btnType;

        function messageAlert(title, message, redirectTo, classType, btnType) {
            let heading = document.querySelector('#successModalLabel')
            heading.innerHTML = title
            heading.classList.add(classType)
            document.querySelector('#modal-message').innerHTML = message;
            document.querySelector('#close-modal').classList.add(btnType);

            $("#successModal").modal('show');
            $('#successModal').on('hide.bs.modal', function (e) {
                // This code will run when the modal is about to be hidden

                // Check if redirectTo is defined
                if (redirectTo) {
                    window.location.href = redirectTo;
                }
                //add logic to prevent reload
                else if (redirectTo === false){}
                else {
                    // Reload the page if there's no redirect
                    window.location.reload();
                }
            });
        }

        const handleLogout = async () => {
            try {
                await fetch('/auth/logout', {
                    method: 'POST',
                    credentials: 'include', // Ensures cookies are sent with the request
                });

                window.location.href = "/admin/login"; // Update the UI after logout
            } catch (err) {
                console.error('Error logging out:', err);
            }
        };

        try {
            document.getElementById('logout-button').addEventListener('click', handleLogout);
        } catch { }

    </script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
        integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
